Лабораторна робота №5

Тема: Програмні канали PIPE та FIFO
Мета: Ознайомитися з механізмом міжпроцесної взаємодії в Linux за допомогою неіменованих іменованих каналів, навчитися організовувати обмін даними між процесами.

Завдання 1 — Синхронізація процесів через неіменований pipe
Умова

Після створення n дочірніх процесів за допомогою fork(), необхідно забезпечити, щоб спочатку працювали всі діти, а батьківський процес продовжив виконання лише після їх завершення.

Принцип роботи

Створюється канал pipe(fds).

Кожна дитина після виконання роботи записує 1 байт у канал.

Батько читає з fds[0] рівно n байтів — після цього продовжує роботу.

Компіляція та запуск
make
./bin/task1 3

Приклад виконання
[parent pid=5627] forking 3 children...
[child 0 | pid=5628] work done after 340 ms
[child 2 | pid=5630] work done after 494 ms
[child 1 | pid=5629] work done after 649 ms
[parent] received 3/3 tokens
Parent final action: ALL children finished. 

Завдання 2 — Двонаправлений зв’язок між батьком і дитиною через pipe
Умова

Реалізувати двосторонній обмін даними між батьком і дочірнім процесом:

Батько вводить рядки з клавіатури.

Надсилає рядок дочірньому процесу.

Дитина переводить текст у верхній регістр і повертає його назад.

Завершення за командою stop.

Схема зв’язку
parent → pipe1 → child
child  → pipe2 → parent

Компіляція та запуск
make
./bin/task2

Приклад виконання
Enter text (stop to exit): hello world
Child: HELLO WORLD
Enter text (stop to exit): test
Child: TEST
Enter text (stop to exit): stop

Завдання 3 — Двонаправлений зв’язок між процесами через іменовані канали FIFO
Умова

Організувати обмін повідомленнями між двома незалежними процесами (не спорідненими) за допомогою іменованих каналів FIFO.

Схема зв’язку
writer → fifo1 → reader
reader → fifo2 → writer

Файли

fifo1, fifo2 — створюються автоматично при запуску.

writer — надсилає текст і отримує відповідь.

reader — приймає текст, переводить у верхній регістр і відправляє назад.

Компіляція
make

Запуск у двох терміналах

Термінал 1:

./bin/task3 reader


Термінал 2:

./bin/task3 writer

Приклад виконання
Enter text (stop to exit): hi
Reader: HI
Enter text (stop to exit): fgsh
Reader: FGSH
Enter text (stop to exit): stop

Структура проєкту
lb5/
├── task1/
│   ├── src/
│   ├── include/
│   ├── Makefile
│   └── bin/task1
├── task2/
│   ├── src/
│   ├── include/
│   ├── Makefile
│   └── bin/task2
└── task3/
    ├── src/
    ├── include/
    ├── Makefile
    └── bin/task3

Висновки

У ході виконання лабораторної роботи було:

Вивчено принцип роботи неіменованих іменованих каналів у Linux.

Реалізовано три типи міжпроцесної взаємодії:

Одностороння синхронізація через pipe.

Двосторонній обмін між батьком і дитиною через два pipe.

Двосторонній обмін між незалежними процесами через FIFO.

Отримано практичні навички синхронізації процесів, роботи з файловими дескрипторами та передачі даних між процесами.
